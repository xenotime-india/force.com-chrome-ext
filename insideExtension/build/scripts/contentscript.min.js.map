{"version":3,"sources":["contentscript.js"],"names":["console","log","availableResource","requestSplit","window","onload","location","href","indexOf","processStatus","localStorage","getItem","changeSetNameVal","changeSetDescriptionVal","pageDescription","document","querySelector","innerHTML","changeSetName","getElementById","value","changeSetDescription","removeItem","saveChangeSet","setItem","setTimeout","click","changeSet","JSON","parse","profiles","DoneChangeSet","length","pendingProcess","filter","item","name","alertDiv","createElement","style","padding","backgroundColor","color","bDescription","appendChild","currentProcess","sessionStorage","stringify","outboundCs_add","members","outboundCs_addProfile","rowsperpage","getUrlEncodedKey","entityType","path","setUrlEncodedKey","search","protocol","host","pathname","needSave","querySelectorAll","forEach","title","startsWith","split","member","convertSFDC15To18","checked","push"],"mappings":"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","file":"contentscript.min.js","sourcesContent":["'use strict';\n\nconsole.log('\\'Allo \\'Allo! Content script','Xenotime');\nvar availableResource = [\"QuickActionDefinition\", \"ActionLinkGroupTemplate\", \"ApexClass\", \"CustomShareRowCause\", \"ApexTrigger\", \"TabSet\", \"ProcessDefinition\", \"ContentAsset\", \"AssignmentRule\", \"AssistantRecommendationType\", \"AuthProvider\", \"AutoResponseRule\", \"WebLink\", \"CorsWhitelistEntry\", \"CallCenter\", \"ChatterExtension\", \"CommChannelLayout\", \"CompactLayout\", \"CspTrustedSite\", \"CustomConsoleComponent\", \"CustomFieldDefinition\", \"ExternalString\", \"Custom Metadata Type\", \"CustomEntityDefinition\", \"CustomPermission\", \"CustomReportType\", \"Custom Settings\", \"Dashboard\", \"CleanDataService\", \"Document\", \"DuplicateRule\", \"EclairNgMapGeoJson\", \"EmailTemplate\", \"EscalationRule\", \"EventSubscription\", \"ExternalDataSource\", \"ExternalServiceRegistration\", \"FeedFilterDefinition\", \"FieldMapping\", \"FieldSet\", \"FlowDefinition\", \"Folder\", \"SharedPicklistDefinition\", \"Group\", \"PageComponent\", \"CustomPage\", \"BrandTemplate\", \"CommunityTemplateDefinition\", \"AuraDefinitionBundle\", \"FlexiPage\", \"LightningExperienceTheme\", \"ListView\", \"MatchingRule\", \"MailAppOwaWhitelist\", \"NamedCredential\", \"Network\", \"Layout\", \"PathAssistant\", \"PermissionSet\", \"PlatformCachePartition\", \"FeedPostTemplate\", \"Queues\", \"RecordType\", \"RemoteProxy\", \"Report\", \"ReportJob\", \"UserRole\", \"Scontrol\", \"SecurityCustomBaseline\", \"ActionSend\", \"CustomObjectCriteriaSharingRule\", \"CustomObjectOwnerSharingRule\", \"SharingSet\", \"Site\", \"StaticResource\", \"CustomTabDefinition\", \"UserProvisioningConfig\", \"VF_Email_Template__mdt\", \"ValidationFormula\", \"ApexComponent\", \"ApexPage\", \"CspFrameAncestor\", \"ActionEmail\", \"ActionFieldUpdate\", \"ActionOutboundMessage\", \"WorkflowRule\", \"ActionTask\", \"Community\", \"qbdialer__isTriggerConfig__mdt\"];\nvar requestSplit = [\"ListView\", \"Layout\"];\nwindow.onload = function() {\n    if(window.location.href.indexOf('changemgmt/createOutboundChangeSet.apexp?auto=1') >= 0) {\n        var processStatus = localStorage.getItem('processStatus');\n        var changeSetNameVal = localStorage.getItem('changeSetName');\n        var changeSetDescriptionVal = localStorage.getItem('changeSetDescription');\n        if(processStatus == '1') {\n            var pageDescription = document.querySelector('.pageDescription');\n            if (pageDescription) {\n                pageDescription.innerHTML = 'Creating New Change Set using automated tool.';\n            }\n            var changeSetName = document.getElementById('CreateOutboundChangeSetPage:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetForm:CreateOutboundChangePageBlock:changesetTableSection:nameSection:changeSetName');\n\n            if (changeSetName) {\n                changeSetName.value = changeSetNameVal;\n            }\n            var changeSetDescription = document.getElementById('CreateOutboundChangeSetPage:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetForm:CreateOutboundChangePageBlock:changesetTableSection:descriptionSection:changeSetDescription');\n            if (changeSetDescription) {\n                changeSetDescription.value = changeSetDescriptionVal;\n            }\n\n            localStorage.removeItem('changeSetName');\n            localStorage.removeItem('changeSetDescription');\n\n            var saveChangeSet = document.getElementById('CreateOutboundChangeSetPage:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetForm:CreateOutboundChangePageBlock:form_buttons:saveChangeSet');\n            if (saveChangeSet) {\n                localStorage.setItem('processStatus','2');\n                setTimeout(saveChangeSet.click(),100);\n            }\n        }\n    }\n\n    if(window.location.href.indexOf('changemgmt/outboundChangeSetDetailPage.apexp') >= 0) {\n        var changeSet = JSON.parse(localStorage.getItem('changeSet'));\n        var profiles = JSON.parse(localStorage.getItem('profiles'));\n        var processStatus = localStorage.getItem('processStatus');\n        var DoneChangeSet = localStorage.getItem('DoneChangeSet') != null ? JSON.parse(localStorage.getItem('DoneChangeSet')) : [];\n        if(processStatus == '2' && changeSet.length > 0) {\n            var pendingProcess = changeSet.filter(function (item) {\n                return DoneChangeSet.indexOf(item.name) < 0 && availableResource.indexOf(item.name) >= 0;\n            });\n            console.log(pendingProcess);\n            if(pendingProcess.length > 0) {\n                var alertDiv = document.createElement(\"div\");\n                alertDiv.style.padding = \"20px\";\n                alertDiv.style.backgroundColor = \"#2196F3\";\n                alertDiv.style.color = \"white\";\n                alertDiv.innerHTML = \"Your Change Set is in progress. Please Wait...\";\n\n                var bDescription = document.querySelector('.bDescription')\n                bDescription.innerHTML = '';\n                bDescription.appendChild(alertDiv);\n\n                var currentProcess = pendingProcess[0];\n                sessionStorage.setItem('CurrentProcess', JSON.stringify(currentProcess));\n                localStorage.setItem('DoneChangeSet', JSON.stringify(DoneChangeSet));\n                var outboundCs_add = document.getElementById('outboundChangeSetDetailPage:outboundChangeSetDetailPageBody:outboundChangeSetDetailPageBody:detail_form:outboundCs_componentsBlock:component_list_form_buttons:outboundCs_add');\n\n                setTimeout(outboundCs_add.click(),500);\n            } else if(profiles.members.length > 0){\n                localStorage.setItem('processStatus','3');\n                var alertDiv = document.createElement(\"div\");\n                alertDiv.style.padding = \"20px\";\n                alertDiv.style.backgroundColor = \"#2196F3\";\n                alertDiv.style.color = \"white\";\n                alertDiv.innerHTML = \"Your Change Set is in progress. Please Wait...\";\n\n                var bDescription = document.querySelector('.bDescription')\n                bDescription.innerHTML = '';\n                bDescription.appendChild(alertDiv);\n                var outboundCs_addProfile = document.getElementById('outboundChangeSetDetailPage:outboundChangeSetDetailPageBody:outboundChangeSetDetailPageBody:detail_form:outboundCs_profilesBlock:component_list_form_buttons:outboundCs_addProfile');\n\n                setTimeout(outboundCs_addProfile.click(),500);\n            } else {\n                localStorage.removeItem('processStatus');\n                var alertDiv = document.createElement(\"div\");\n                alertDiv.style.padding = \"20px\";\n                alertDiv.style.backgroundColor = \"#4CAF50\";\n                alertDiv.style.color = \"white\";\n                alertDiv.innerHTML = \"Your Change Set is ready...\";\n\n                var bDescription = document.querySelector('.bDescription')\n                bDescription.innerHTML = '';\n                bDescription.appendChild(alertDiv);\n            }\n        }\n        if(processStatus == '3' && profiles.members.length > 0) {\n            localStorage.removeItem('processStatus');\n            var alertDiv = document.createElement(\"div\");\n            alertDiv.style.padding = \"20px\";\n            alertDiv.style.backgroundColor = \"#4CAF50\";\n            alertDiv.style.color = \"white\";\n            alertDiv.innerHTML = \"Your Change Set is ready...\";\n\n            var bDescription = document.querySelector('.bDescription')\n            bDescription.innerHTML = '';\n            bDescription.appendChild(alertDiv);\n        }\n    }\n\n    if(window.location.href.indexOf('p/mfpkg/AddToPackageFromChangeMgmtUi') >= 0) {\n\n        var processStatus = localStorage.getItem('processStatus');\n        if(processStatus == '2') {\n            var rowsperpage = getUrlEncodedKey('rowsperpage');\n            var entityType = getUrlEncodedKey('entityType');\n            var currentProcess = sessionStorage.getItem('CurrentProcess') != null ? JSON.parse(sessionStorage.getItem('CurrentProcess')) : null;\n            if(currentProcess != null) {\n                if (rowsperpage == '' || entityType != currentProcess.name) {\n                    var path = setUrlEncodedKey('rowsperpage', '1500', window.location.search);\n                    path = setUrlEncodedKey('entityType', currentProcess.name, path);\n                    setTimeout(function () {\n                        window.location.href = window.location.protocol + '//' + window.location.host + window.location.pathname + path;\n                    }, 100);\n                } else {\n                    if (currentProcess && entityType == currentProcess.name) {\n                        var needSave = false;\n                        document.querySelectorAll('input[type=checkbox]').forEach(function (item) {\n                            if (item.title.startsWith(\"Select \") && item.title.split(' ').length >= 2) {\n                                var result = currentProcess.members.filter(function (member) {\n                                        return member == convertSFDC15To18(item.value);\n                                });\n                                if (result.length > 0) {\n                                    item.checked = true;\n                                    needSave = true;\n                                }\n                            }\n                        });\n                        var DoneChangeSet = JSON.parse(localStorage.getItem('DoneChangeSet'));\n                        DoneChangeSet.push(currentProcess.name);\n\n                        var changeSet = JSON.parse(localStorage.getItem('changeSet'));\n\n                        var pendingProcess = changeSet.filter(function (item) {\n                            return DoneChangeSet.indexOf(item.name) < 0 && availableResource.indexOf(item.name) >= 0;\n                        });\n                        console.log(pendingProcess);\n                        if (pendingProcess.length > 0) {\n                            currentProcess = pendingProcess[0];\n                            sessionStorage.setItem('CurrentProcess', JSON.stringify(currentProcess));\n                            localStorage.setItem('DoneChangeSet', JSON.stringify(DoneChangeSet));\n                        } else {\n                            sessionStorage.removeItem('CurrentProcess');\n                            localStorage.setItem('DoneChangeSet', JSON.stringify(DoneChangeSet));\n                        }\n                        if(needSave) {\n                            setTimeout(document.querySelector('input[name=save]').click(),100);\n                        } else {\n                            window.location.href = window.location.href;\n                        }\n                    }\n                }\n            } else {\n                localStorage.removeItem('processStatus');\n                setTimeout(document.querySelector('input[name=cancel]').click(),100);\n            }\n        }\n    }\n\n    if(window.location.href.indexOf('changemgmt/outboundChangeSetAddProfile.apexp') >= 0) {\n        var processStatus = localStorage.getItem('processStatus');\n        var profiles = JSON.parse(localStorage.getItem('profiles'));\n        if(processStatus == '3') {\n            if(profiles.members.length > 0) {\n                var needSave = false;\n                document.querySelectorAll('input[type=checkbox]').forEach(function (item) {\n                    if (item.title.startsWith(\"Select \") && item.title.split(' ').length >= 2) {\n                        var result = profiles.members.filter(function (member) {\n                            return member == convertSFDC15To18(item.value);\n                        });\n                        if (result.length > 0) {\n                            item.checked = true;\n                            needSave = true;\n                        }\n                    }\n                });\n\n                if(needSave) {\n                    setTimeout(document.querySelector('input[name=save]').click(),100);\n                } else {\n                    localStorage.removeItem('processStatus');\n                    setTimeout(document.querySelector('input[name=cancel]').click(),100);\n                }\n            } else {\n                localStorage.removeItem('processStatus');\n                setTimeout(document.querySelector('input[name=cancel]').click(),100);\n            }\n        }\n    }\n};"]}