{"version":3,"sources":["contentscript.js"],"names":["console","log","availableResource","requestSplit","window","onload","location","href","indexOf","processStatus","localStorage","getItem","changeSetNameVal","changeSetDescriptionVal","pageDescription","document","querySelector","innerHTML","changeSetName","getElementById","value","changeSetDescription","removeItem","saveChangeSet","setItem","setTimeout","click","changeSet","JSON","parse","DoneChangeSet","length","pendingProcess","filter","item","name","currentProcess","sessionStorage","stringify","outboundCs_add","alert","rowsperpage","getUrlEncodedKey","entityType","path","setUrlEncodedKey","search","protocol","host","pathname","needSave","querySelectorAll","forEach","title","startsWith","split","members","member","subStrAfterChars","toLowerCase","checked","push"],"mappings":"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","file":"contentscript.min.js","sourcesContent":["'use strict';\n\nconsole.log('\\'Allo \\'Allo! Content script','Xenotime');\nvar availableResource = [\"QuickActionDefinition\", \"ActionLinkGroupTemplate\", \"ApexClass\", \"CustomShareRowCause\", \"ApexTrigger\", \"TabSet\", \"ProcessDefinition\", \"ContentAsset\", \"AssignmentRule\", \"AssistantRecommendationType\", \"AuthProvider\", \"AutoResponseRule\", \"WebLink\", \"CorsWhitelistEntry\", \"CallCenter\", \"ChatterExtension\", \"CommChannelLayout\", \"CompactLayout\", \"CspTrustedSite\", \"CustomConsoleComponent\", \"CustomFieldDefinition\", \"ExternalString\", \"Custom Metadata Type\", \"CustomEntityDefinition\", \"CustomPermission\", \"CustomReportType\", \"Custom Settings\", \"Dashboard\", \"CleanDataService\", \"Document\", \"DuplicateRule\", \"EclairNgMapGeoJson\", \"EmailTemplate\", \"EscalationRule\", \"EventSubscription\", \"ExternalDataSource\", \"ExternalServiceRegistration\", \"FeedFilterDefinition\", \"FieldMapping\", \"FieldSet\", \"FlowDefinition\", \"Folder\", \"SharedPicklistDefinition\", \"Group\", \"PageComponent\", \"CustomPage\", \"BrandTemplate\", \"CommunityTemplateDefinition\", \"AuraDefinitionBundle\", \"FlexiPage\", \"LightningExperienceTheme\", \"ListView\", \"MatchingRule\", \"MailAppOwaWhitelist\", \"NamedCredential\", \"Network\", \"Layout\", \"PathAssistant\", \"PermissionSet\", \"PlatformCachePartition\", \"FeedPostTemplate\", \"Queues\", \"RecordType\", \"RemoteProxy\", \"Report\", \"ReportJob\", \"UserRole\", \"Scontrol\", \"SecurityCustomBaseline\", \"ActionSend\", \"CustomObjectCriteriaSharingRule\", \"CustomObjectOwnerSharingRule\", \"SharingSet\", \"Site\", \"StaticResource\", \"CustomTabDefinition\", \"UserProvisioningConfig\", \"VF_Email_Template__mdt\", \"ValidationFormula\", \"ApexComponent\", \"ApexPage\", \"CspFrameAncestor\", \"ActionEmail\", \"ActionFieldUpdate\", \"ActionOutboundMessage\", \"WorkflowRule\", \"ActionTask\", \"Community\", \"qbdialer__isTriggerConfig__mdt\"];\nvar requestSplit = [\"ListView\", \"Layout\"];\nwindow.onload = function() {\n    if(window.location.href.indexOf('changemgmt/createOutboundChangeSet.apexp?auto=1') >= 0) {\n        var processStatus = localStorage.getItem('processStatus');\n        var changeSetNameVal = localStorage.getItem('changeSetName');\n        var changeSetDescriptionVal = localStorage.getItem('changeSetDescription');\n        if(processStatus == '1') {\n            var pageDescription = document.querySelector('.pageDescription');\n            if (pageDescription) {\n                pageDescription.innerHTML = 'Creating New Change Set using automated tool.';\n            }\n            var changeSetName = document.getElementById('CreateOutboundChangeSetPage:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetForm:CreateOutboundChangePageBlock:changesetTableSection:nameSection:changeSetName');\n\n            if (changeSetName) {\n                changeSetName.value = changeSetNameVal;\n            }\n            var changeSetDescription = document.getElementById('CreateOutboundChangeSetPage:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetForm:CreateOutboundChangePageBlock:changesetTableSection:descriptionSection:changeSetDescription');\n            if (changeSetDescription) {\n                changeSetDescription.value = changeSetDescriptionVal;\n            }\n\n            localStorage.removeItem('changeSetName');\n            localStorage.removeItem('changeSetDescription');\n\n            var saveChangeSet = document.getElementById('CreateOutboundChangeSetPage:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetForm:CreateOutboundChangePageBlock:form_buttons:saveChangeSet');\n            if (saveChangeSet) {\n                localStorage.setItem('processStatus','2');\n                setTimeout(saveChangeSet.click(),100);\n            }\n        }\n    }\n\n    if(window.location.href.indexOf('changemgmt/outboundChangeSetDetailPage.apexp') >= 0) {\n        var changeSet = JSON.parse(localStorage.getItem('changeSet'));\n        var processStatus = localStorage.getItem('processStatus');\n        var DoneChangeSet = localStorage.getItem('DoneChangeSet') != null ? JSON.parse(localStorage.getItem('DoneChangeSet')) : [];\n        if(processStatus == '2' && changeSet.length > 0) {\n            var pendingProcess = changeSet.filter(function (item) {\n                return DoneChangeSet.indexOf(item.name) < 0 && availableResource.indexOf(item.name) >= 0;\n            });\n            console.log(pendingProcess);\n            if(pendingProcess.length > 0) {\n                var currentProcess = pendingProcess[0];\n                sessionStorage.setItem('CurrentProcess', JSON.stringify(currentProcess));\n                localStorage.setItem('DoneChangeSet', JSON.stringify(DoneChangeSet));\n                var outboundCs_add = document.getElementById('outboundChangeSetDetailPage:outboundChangeSetDetailPageBody:outboundChangeSetDetailPageBody:detail_form:outboundCs_componentsBlock:component_list_form_buttons:outboundCs_add');\n\n                setTimeout(outboundCs_add.click(),100);\n            } else {\n                localStorage.removeItem('processStatus');\n                alert('Your Change Set is ready...');\n            }\n        }\n    }\n\n    if(window.location.href.indexOf('p/mfpkg/AddToPackageFromChangeMgmtUi') >= 0) {\n\n        var processStatus = localStorage.getItem('processStatus');\n        if(processStatus == '2') {\n            var rowsperpage = getUrlEncodedKey('rowsperpage');\n            var entityType = getUrlEncodedKey('entityType');\n            var currentProcess = sessionStorage.getItem('CurrentProcess') != null ? JSON.parse(sessionStorage.getItem('CurrentProcess')) : null;\n            if(currentProcess != null) {\n                if (rowsperpage == '' || entityType != currentProcess.name) {\n                    var path = setUrlEncodedKey('rowsperpage', '1500', window.location.search);\n                    path = setUrlEncodedKey('entityType', currentProcess.name, path);\n                    setTimeout(function () {\n                        window.location.href = window.location.protocol + '//' + window.location.host + window.location.pathname + path;\n                    }, 100);\n                } else {\n                    if (currentProcess && entityType == currentProcess.name) {\n                        var needSave = false;\n                        document.querySelectorAll('input[type=checkbox]').forEach(function (item) {\n                            if (item.title.startsWith(\"Select \") && item.title.split(' ').length == 2) {\n                                var result = currentProcess.members.filter(function (member) {\n                                    if(requestSplit.indexOf(currentProcess.name) >= 0) {\n                                        return subStrAfterChars(member.toLowerCase(), '-', 'b') == item.title.split(' ')[1].toLowerCase();\n                                    } else {\n                                        return member.toLowerCase() == item.title.split(' ')[1].toLowerCase();\n                                    }\n                                })\n                                if (result.length > 0) {\n                                    item.checked = true;\n                                    needSave = true;\n                                }\n                            }\n                        });\n                        var DoneChangeSet = JSON.parse(localStorage.getItem('DoneChangeSet'));\n                        DoneChangeSet.push(currentProcess.name);\n\n                        var changeSet = JSON.parse(localStorage.getItem('changeSet'));\n\n                        var pendingProcess = changeSet.filter(function (item) {\n                            return DoneChangeSet.indexOf(item.name) < 0 && availableResource.indexOf(item.name) >= 0;\n                        });\n                        console.log(pendingProcess);\n                        if (pendingProcess.length > 0) {\n                            currentProcess = pendingProcess[0];\n                            sessionStorage.setItem('CurrentProcess', JSON.stringify(currentProcess));\n                            localStorage.setItem('DoneChangeSet', JSON.stringify(DoneChangeSet));\n                        } else {\n                            sessionStorage.removeItem('CurrentProcess');\n                            localStorage.setItem('DoneChangeSet', JSON.stringify(DoneChangeSet));\n                        }\n                        if(needSave) {\n                            setTimeout(document.querySelector('input[name=save]').click(),100);\n                        } else {\n                            window.location.href = window.location.href;\n                        }\n                    }\n                }\n            } else if(processStatus != null){\n                localStorage.removeItem('processStatus');\n                setTimeout(document.querySelector('input[name=cancel]').click(),100);\n            }\n        }\n    }\n};"]}