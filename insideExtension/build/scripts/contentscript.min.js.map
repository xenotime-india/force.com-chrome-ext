{"version":3,"sources":["contentscript.js"],"names":["window","onload","location","href","indexOf","processStatus","localStorage","getItem","changeSetNameVal","changeSetDescriptionVal","pageDescription","document","querySelector","innerHTML","changeSetName","getElementById","value","changeSetDescription","removeItem","saveChangeSet","setItem","click","changeSet","JSON","parse","DoneChangeSet","length","pendingProcess","filter","item","name","currentProcess","sessionStorage","stringify","outboundCs_add","setTimeout","rowsperpage","getUrlEncodedKey","entityType","path","setUrlEncodedKey","search","protocol","host","pathname","needSave","querySelectorAll","forEach","title","startsWith","split","members","member","toLowerCase","checked","push"],"mappings":"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","file":"contentscript.min.js","sourcesContent":["'use strict';\n\nvoid 0;\nwindow.onload = function() {\n    if(window.location.href.indexOf('changemgmt/createOutboundChangeSet.apexp?auto=1') >= 0) {\n        var processStatus = localStorage.getItem('processStatus');\n        var changeSetNameVal = localStorage.getItem('changeSetName');\n        var changeSetDescriptionVal = localStorage.getItem('changeSetDescription');\n        if(processStatus == '1') {\n            var pageDescription = document.querySelector('.pageDescription');\n            if (pageDescription) {\n                pageDescription.innerHTML = 'Creating New Change Set using automated tool.';\n            }\n            var changeSetName = document.getElementById('CreateOutboundChangeSetPage:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetForm:CreateOutboundChangePageBlock:changesetTableSection:nameSection:changeSetName');\n\n            if (changeSetName) {\n                changeSetName.value = changeSetNameVal;\n            }\n            var changeSetDescription = document.getElementById('CreateOutboundChangeSetPage:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetForm:CreateOutboundChangePageBlock:changesetTableSection:descriptionSection:changeSetDescription');\n            if (changeSetDescription) {\n                changeSetDescription.value = changeSetDescriptionVal;\n            }\n\n            localStorage.removeItem('changeSetName');\n            localStorage.removeItem('changeSetDescription');\n\n            var saveChangeSet = document.getElementById('CreateOutboundChangeSetPage:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetForm:CreateOutboundChangePageBlock:form_buttons:saveChangeSet');\n            if (saveChangeSet) {\n                localStorage.setItem('processStatus','2');\n                saveChangeSet.click();\n            }\n        }\n    }\n\n    if(window.location.href.indexOf('changemgmt/outboundChangeSetDetailPage.apexp') >= 0) {\n        var changeSet = JSON.parse(localStorage.getItem('changeSet'));\n        var processStatus = localStorage.getItem('processStatus');\n        var DoneChangeSet = localStorage.getItem('DoneChangeSet') != null ? JSON.parse(localStorage.getItem('DoneChangeSet')) : [];\n        if(processStatus == '2' && changeSet.length > 0) {\n            var pendingProcess = changeSet.filter(function (item) {\n                return DoneChangeSet.indexOf(item.name) < 0;\n            });\n            void 0;\n            if(pendingProcess.length > 0) {\n                var currentProcess = pendingProcess[0];\n                sessionStorage.setItem('CurrentProcess', JSON.stringify(currentProcess));\n                localStorage.setItem('DoneChangeSet', JSON.stringify(DoneChangeSet));\n                var outboundCs_add = document.getElementById('outboundChangeSetDetailPage:outboundChangeSetDetailPageBody:outboundChangeSetDetailPageBody:detail_form:outboundCs_componentsBlock:component_list_form_buttons:outboundCs_add');\n\n                setTimeout(outboundCs_add.click(),500);\n            }\n        }\n    }\n\n    if(window.location.href.indexOf('p/mfpkg/AddToPackageFromChangeMgmtUi') >= 0) {\n\n        var processStatus = localStorage.getItem('processStatus');\n        if(processStatus == '2') {\n            var rowsperpage = getUrlEncodedKey('rowsperpage');\n            var entityType = getUrlEncodedKey('entityType');\n            var currentProcess = sessionStorage.getItem('CurrentProcess') != null ? JSON.parse(sessionStorage.getItem('CurrentProcess')) : null;\n            if(currentProcess != null) {\n                if (rowsperpage == '') {\n                    var path = setUrlEncodedKey('rowsperpage', '1500', window.location.search);\n                    path = setUrlEncodedKey('entityType', currentProcess.name, path);\n                    setTimeout(function () {\n                        window.location.href = window.location.protocol + '//' + window.location.host + window.location.pathname + path;\n                    }, 500);\n                } else {\n                    if (currentProcess && entityType == currentProcess.name) {\n                        var needSave = false;\n                        document.querySelectorAll('input[type=checkbox]').forEach(function (item) {\n                            if (item.title.startsWith(\"Select \") && item.title.split(' ').length == 2) {\n                                var result = currentProcess.members.filter(function (member) {\n                                    return member.toLowerCase() == item.title.split(' ')[1].toLowerCase();\n                                })\n                                if (result.length > 0) {\n                                    item.checked = true;\n                                    needSave = true;\n                                }\n                            }\n                        });\n                        var DoneChangeSet = JSON.parse(localStorage.getItem('DoneChangeSet'));\n                        DoneChangeSet.push(currentProcess.name);\n\n                        var changeSet = JSON.parse(localStorage.getItem('changeSet'));\n\n                        var pendingProcess = changeSet.filter(function (item) {\n                            return DoneChangeSet == null || DoneChangeSet.indexOf(item.name) < 0;\n                        });\n                        void 0;\n                        if (pendingProcess.length > 0) {\n                            currentProcess = pendingProcess[0];\n                            sessionStorage.setItem('CurrentProcess', JSON.stringify(currentProcess));\n                            localStorage.setItem('DoneChangeSet', JSON.stringify(DoneChangeSet));\n                        } else {\n                            sessionStorage.removeItem('CurrentProcess');\n                            localStorage.setItem('DoneChangeSet', JSON.stringify(DoneChangeSet));\n                        }\n                        if(needSave) {\n                            setTimeout(document.querySelector('input[name=save]').click(),500);\n                        } else {\n                            window.location.href = window.location.href;\n                        }\n                    }\n                }\n            } else {\n                localStorage.removeItem('processStatus');\n                setTimeout(document.querySelector('input[name=cancel]').click(),500);\n            }\n        }\n    }\n};"]}