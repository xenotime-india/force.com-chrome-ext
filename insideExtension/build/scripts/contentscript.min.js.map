{"version":3,"sources":["contentscript.js"],"names":["jQuery","window","location","href","indexOf","changeSetName","value","changeSetDescription","saveChangeSet","click","changeSet","JSON","parse","localStorage","getItem","processStatus","DoneChangeSet","length","pendingProcess","filter","item","name","currentProcess","sessionStorage","setItem","stringify","rowsperpage","getUrlEncodedKey","entityType","path","setUrlEncodedKey","search","setTimeout","protocol","host","pathname","needSave","document","querySelectorAll","forEach","title","startsWith","split","members","member","toLowerCase","checked","push","removeItem","querySelector"],"mappings":"AAAA,aAGAA,OAAO,WACH,GAAGC,OAAOC,SAASC,KAAKC,QAAQ,4CAA8C,EAAG,CAC7E,IAAIC,EAAgBL,OAAO,yMAEvBK,IACAA,EAAcC,MAAQ,kBAE1B,IAAIC,EAAuBP,OAAO,uNAC9BO,IACAA,EAAqBD,MAAQ,0BAGjC,IAAIE,EAAgBR,OAAO,oLACvBQ,GACAA,EAAcC,QAItB,GAAGR,OAAOC,SAASC,KAAKC,QAAQ,gDAAkD,EAAG,CACjF,IAAIM,EAAYC,KAAKC,MAAMC,aAAaC,QAAQ,cAC5CC,EAAgBF,aAAaC,QAAQ,iBACrCE,EAAyD,MAAzCH,aAAaC,QAAQ,iBAA2BH,KAAKC,MAAMC,aAAaC,QAAQ,qBACpG,GAAoB,KAAjBC,GAAwBL,EAAUO,OAAS,EAK1C,IAJIC,EAAiBR,EAAUS,OAAO,SAAUC,GAC5C,OAAOJ,EAAcZ,QAAQgB,EAAKC,MAAQ,KAG5BJ,OAAS,EAAG,CAC1B,IAAIK,EAAiBJ,EAAe,GACpCK,eAAeC,QAAQ,iBAAkBb,KAAKc,UAAUH,IACxDT,aAAaW,QAAQ,gBAAiBb,KAAKc,UAAUT,KAKjE,GAAGf,OAAOC,SAASC,KAAKC,QAAQ,wCAA0C,GAGlD,MADhBW,EAAgBF,aAAaC,QAAQ,kBAChB,CACrB,IAAIY,EAAcC,iBAAiB,eAC/BC,EAAaD,iBAAiB,cAElC,GAAqB,OADjBL,EAA6D,MAA5CC,eAAeT,QAAQ,kBAA4BH,KAAKC,MAAMW,eAAeT,QAAQ,mBAAqB,OAE3H,GAAmB,IAAfY,EAAmB,CACnB,IAAIG,EAAOC,iBAAiB,cAAe,OAAQ7B,OAAOC,SAAS6B,QACnEF,EAAOC,iBAAiB,aAAcR,EAAeD,KAAMQ,GAC3DG,WAAW,WACP/B,OAAOC,SAASC,KAAOF,OAAOC,SAAS+B,SAAW,KAAOhC,OAAOC,SAASgC,KAAOjC,OAAOC,SAASiC,SAAWN,GAC5G,UAEH,GAAIP,GAAkBM,GAAcN,EAAeD,KAAM,CACrD,IAiBIH,EAjBAkB,GAAW,EACfC,SAASC,iBAAiB,wBAAwBC,QAAQ,SAAUnB,GAC5DA,EAAKoB,MAAMC,WAAW,YAA8C,GAAhCrB,EAAKoB,MAAME,MAAM,KAAKzB,SAC7CK,EAAeqB,QAAQxB,OAAO,SAAUyB,GACjD,OAAOA,EAAOC,eAAiBzB,EAAKoB,MAAME,MAAM,KAAK,GAAGG,gBAEjD5B,OAAS,IAChBG,EAAK0B,SAAU,EACfV,GAAW,OAInBpB,EAAgBL,KAAKC,MAAMC,aAAaC,QAAQ,mBACtCiC,KAAKzB,EAAeD,OAI9BH,GAFAR,EAAYC,KAAKC,MAAMC,aAAaC,QAAQ,eAEjBK,OAAO,SAAUC,GAC5C,OAAwB,MAAjBJ,GAAyBA,EAAcZ,QAAQgB,EAAKC,MAAQ,KAGpDJ,OAAS,GACxBK,EAAiBJ,EAAe,GAChCK,eAAeC,QAAQ,iBAAkBb,KAAKc,UAAUH,IACxDT,aAAaW,QAAQ,gBAAiBb,KAAKc,UAAUT,MAErDO,eAAeyB,WAAW,kBAC1BnC,aAAaW,QAAQ,gBAAiBb,KAAKc,UAAUT,KAEtDoB,EACCC,SAASY,cAAc,oBAAoBxC,QAE3CR,OAAOC,SAASC,KAAOF,OAAOC,SAASC,WAKnDU,aAAaW,QAAQ,gBAAiB,KACtCa,SAASY,cAAc,sBAAsBxC","file":"contentscript.min.js","sourcesContent":["'use strict';\n\nvoid 0;\njQuery(function() {\n    if(window.location.href.indexOf('changemgmt/createOutboundChangeSet.apexp') > 0) {\n        var changeSetName = jQuery('CreateOutboundChangeSetPage:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetForm:CreateOutboundChangePageBlock:changesetTableSection:nameSection:changeSetName');\n\n        if (changeSetName) {\n            changeSetName.value = 'New Change Set';\n        }\n        var changeSetDescription = jQuery('CreateOutboundChangeSetPage:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetForm:CreateOutboundChangePageBlock:changesetTableSection:descriptionSection:changeSetDescription');\n        if (changeSetDescription) {\n            changeSetDescription.value = 'New Change Description';\n        }\n\n        var saveChangeSet = jQuery('CreateOutboundChangeSetPage:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetPageBody:CreateOutboundChangeSetForm:CreateOutboundChangePageBlock:form_buttons:saveChangeSet');\n        if (saveChangeSet) {\n            saveChangeSet.click();\n        }\n    }\n\n    if(window.location.href.indexOf('changemgmt/outboundChangeSetDetailPage.apexp') > 0) {\n        var changeSet = JSON.parse(localStorage.getItem('changeSet'));\n        var processStatus = localStorage.getItem('processStatus');\n        var DoneChangeSet = localStorage.getItem('DoneChangeSet') != null ? JSON.parse(localStorage.getItem('DoneChangeSet')) : [];\n        if(processStatus == '1' && changeSet.length > 0) {\n            var pendingProcess = changeSet.filter(function (item) {\n                return DoneChangeSet.indexOf(item.name) < 0;\n            });\n            void 0;\n            if(pendingProcess.length > 0) {\n                var currentProcess = pendingProcess[0];\n                sessionStorage.setItem('CurrentProcess', JSON.stringify(currentProcess));\n                localStorage.setItem('DoneChangeSet', JSON.stringify(DoneChangeSet));\n            }\n        }\n    }\n\n    if(window.location.href.indexOf('p/mfpkg/AddToPackageFromChangeMgmtUi') > 0) {\n\n        var processStatus = localStorage.getItem('processStatus');\n        if(processStatus == '1') {\n            var rowsperpage = getUrlEncodedKey('rowsperpage');\n            var entityType = getUrlEncodedKey('entityType');\n            var currentProcess = sessionStorage.getItem('CurrentProcess') != null ? JSON.parse(sessionStorage.getItem('CurrentProcess')) : null;\n            if(currentProcess != null) {\n                if (rowsperpage == '') {\n                    var path = setUrlEncodedKey('rowsperpage', '1500', window.location.search);\n                    path = setUrlEncodedKey('entityType', currentProcess.name, path);\n                    setTimeout(function () {\n                        window.location.href = window.location.protocol + '//' + window.location.host + window.location.pathname + path;\n                    }, 500);\n                } else {\n                    if (currentProcess && entityType == currentProcess.name) {\n                        var needSave = false;\n                        document.querySelectorAll('input[type=checkbox]').forEach(function (item) {\n                            if (item.title.startsWith(\"Select \") && item.title.split(' ').length == 2) {\n                                var result = currentProcess.members.filter(function (member) {\n                                    return member.toLowerCase() == item.title.split(' ')[1].toLowerCase();\n                                })\n                                if (result.length > 0) {\n                                    item.checked = true;\n                                    needSave = true;\n                                }\n                            }\n                        });\n                        var DoneChangeSet = JSON.parse(localStorage.getItem('DoneChangeSet'));\n                        DoneChangeSet.push(currentProcess.name);\n\n                        var changeSet = JSON.parse(localStorage.getItem('changeSet'));\n\n                        var pendingProcess = changeSet.filter(function (item) {\n                            return DoneChangeSet == null || DoneChangeSet.indexOf(item.name) < 0;\n                        });\n                        void 0;\n                        if (pendingProcess.length > 0) {\n                            currentProcess = pendingProcess[0];\n                            sessionStorage.setItem('CurrentProcess', JSON.stringify(currentProcess));\n                            localStorage.setItem('DoneChangeSet', JSON.stringify(DoneChangeSet));\n                        } else {\n                            sessionStorage.removeItem('CurrentProcess');\n                            localStorage.setItem('DoneChangeSet', JSON.stringify(DoneChangeSet));\n                        }\n                        if(needSave) {\n                            document.querySelector('input[name=save]').click();\n                        } else {\n                            window.location.href = window.location.href;\n                        }\n                    }\n                }\n            } else {\n                localStorage.setItem('processStatus', '0');\n                document.querySelector('input[name=cancel]').click();\n            }\n        }\n    }\n})"]}